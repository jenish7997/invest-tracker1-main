<div class="interest-container">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <div class="hero-icon-wrapper">
        <span class="material-icons hero-icon">trending_up</span>
      </div>
      <h1 class="hero-title">Interest Rate Management</h1>
      <p class="hero-subtitle">Set and manage monthly interest rates for your investment portfolio</p>
    </div>
    <div class="hero-decoration">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-section">
    <div class="stat-card">
      <div class="stat-icon">
        <span class="material-icons">show_chart</span>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ rates?.length || 0 }}</div>
        <div class="stat-label">Rate Periods</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">
        <span class="material-icons">trending_up</span>
      </div>
      <div class="stat-content">
        <div class="stat-number">Active</div>
        <div class="stat-label">Rate Management</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">
        <span class="material-icons">calculate</span>
      </div>
      <div class="stat-content">
        <div class="stat-number">Auto</div>
        <div class="stat-label">Calculations</div>
      </div>
    </div>
  </div>

  <!-- Main Form Section -->
  <div class="form-section">
    <div class="form-container">
      <div class="form-header">
        <h2 class="form-title">
          <span class="material-icons">settings</span>
          Set Monthly Rate
        </h2>
        <p class="form-subtitle">Configure interest rates for specific months</p>
      </div>

      <form (ngSubmit)="saveRate()" [formGroup]="rateForm" class="rate-form">
        <div class="form-card">
          <div class="input-group">
            <div class="input-wrapper">
              <label for="monthKey" class="input-label">
                <span class="material-icons">calendar_month</span>
                Select Month
              </label>
              <div class="input-field-wrapper" [class.focused]="rateForm.get('monthKey')?.touched">
                <span class="input-icon">
                  <span class="material-icons">date_range</span>
                </span>
                <input
                  id="monthKey"
                  type="month"
                  class="form-input"
                  formControlName="monthKey"
                />
              </div>
              <div *ngIf="rateForm.get('monthKey')?.invalid && rateForm.get('monthKey')?.touched" class="error-message">
                <span class="material-icons">error</span>
                Please select a month
              </div>
            </div>
          </div>

          <div class="input-group">
            <div class="input-wrapper">
              <label for="rate" class="input-label">
                <span class="material-icons">percent</span>
                Interest Rate
              </label>
              <div class="input-field-wrapper" [class.focused]="rateForm.get('rate')?.touched">
                <span class="input-icon">
                  <span class="material-icons">trending_up</span>
                </span>
                <input
                  id="rate"
                  type="number"
                  step="0.0001"
                  min="0"
                  class="form-input"
                  formControlName="rate"
                  placeholder="e.g. 0.02 for 2%"
                />
              </div>
              <div *ngIf="rateForm.get('rate')?.invalid && rateForm.get('rate')?.touched" class="error-message">
                <span class="material-icons">error</span>
                Enter a valid non-negative rate
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="submit-btn" [disabled]="rateForm.invalid" [class.loading]="loading">
              <span class="material-icons">{{ loading ? 'hourglass_empty' : 'save' }}</span>
              {{ loading ? 'Saving...' : 'Save Rate' }}
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Rates Table -->
    <div class="rates-section" *ngIf="rates.length">
      <div class="section-header">
        <h3 class="section-title">
          <span class="material-icons">list</span>
          Current Interest Rates
        </h3>
        <div class="rate-count">
          {{ rates.length }} rate{{ rates.length !== 1 ? 's' : '' }} configured
        </div>
      </div>

      <div class="table-container">
        <table class="rates-table">
          <thead>
            <tr>
              <th class="month-column">
                <span class="material-icons">calendar_month</span>
                Month
              </th>
              <th class="rate-column">
                <span class="material-icons">percent</span>
                Interest Rate
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let r of rates" class="rate-row">
              <td class="month-cell">{{ r.monthKey | date:'MMMM yyyy' }}</td>
              <td class="rate-cell">
                <span class="rate-badge">{{ r.rate | percent:'1.2-2' }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Success/Error Messages -->
    <div *ngIf="successMessage" class="message-overlay">
      <div class="message-card success">
        <div class="message-icon">
          <span class="material-icons">check_circle</span>
        </div>
        <div class="message-content">
          <h3>Success!</h3>
          <p>{{ successMessage }}</p>
        </div>
        <button class="message-close" (click)="clearMessages()">
          <span class="material-icons">close</span>
        </button>
      </div>
    </div>

    <div *ngIf="errorMessage" class="message-overlay">
      <div class="message-card error">
        <div class="message-icon">
          <span class="material-icons">error</span>
        </div>
        <div class="message-content">
          <h3>Error</h3>
          <p>{{ errorMessage }}</p>
        </div>
        <button class="message-close" (click)="clearMessages()">
          <span class="material-icons">close</span>
        </button>
      </div>
    </div>
  </div>
</div>
